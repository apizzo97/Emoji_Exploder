<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Emoji Exploder</title>
    <style>*{padding: 5px; margins: 5px;}</style>
    <script src="phaser.min.js"></script>
</head>
<body>
    <script>
        var game = new Phaser.Game(1400, 700, Phaser.AUTO, "",
            {preload: preload, create: create, update: update
            });

        var background;
        var cannon_wheel;
        var cannon;
        var cat;
        var heart;
        var poop;
        var scream;
        var tears;
        var tongue;
        var upsideDown;
        var arrowRight;
        var arrowLeft;
        var arrowText;
        var scoreText;
        var score = 0;
        var textStyle;
        var playing = false;
        var startButton;
        var endGame;
        var endButton;
        var lives;
        var lifeCounter = 3;
        var music;
        var cannonBalls;
        var cannonTime = 0;
        var fireButton;
        var cursors;
        var cannonBall;



        function preload(){
            console.log(game);
            //make responsive
            game.scale.pageAlignHorizontally = true;
            game.scale.pageAlignVertically = true;
            game.scale.fullScreenScaleMode = Phaser.ScaleManager.SHOW_ALL;

            //load background
            game.stage.backgroundColor = ("#FFFFFF");
            game.load.image("background", "assets/background.png" );

            //load cannon, cannonBall and cannonBall wheel
            game.load.image("cannon_wheel", "assets/cannon-wheel.png");
            game.load.image("cannon", "assets/cannon.png");
            game.load.image("cannonBall", "assets/cannonBall.png");

            //load emojis
            game.load.image("cat", "assets/cat-emoji.png");
            game.load.image("heart", "assets/heart-emoji.png");
            game.load.image("poop", "assets/poop-emoji.png");
            game.load.image("screaming", "assets/screaming-emoji.png");
            game.load.image("tears", "assets/tears-emoji.png");
            game.load.image("tongue", "assets/tongue-emoji.png");
            game.load.image("upsideDown", "assets/upsidedown-emoji.png");

            //load arrows
            game.load.image("arrowRight", "assets/triangle-right.png");
            game.load.image("arrowLeft", "assets/triangle-left.png");

            //start button
            game.load.image("startButton", "assets/button.png");

            //game music



        }

        function create(){
            console.log(game);
            //background
            background = game.add.tileSprite(0, 0,1400,700,"background");

            //cannon wheel
            cannon_wheel = game.add.sprite(50, 570, "cannon_wheel");
            cannon_wheel.moveUp(cannon_wheel);

            //cannon
           cannon = game.add.sprite(110, 550, "cannon");
           cannon.anchor.setTo(0.5);


           //emojis
            cat = game.add.sprite(1300, 20, "cat");
            heart = game.add.sprite(1300, 95, "heart");
            poop = game.add.sprite(1300, 180, "poop");
            scream = game.add.sprite(1300, 255, "screaming");
            tears = game.add.sprite(1300, 330, "tears");
            tongue = game.add.sprite(1300, 405, "tongue");
            upsideDown = game.add.sprite(1300, 480, "upsideDown");
            cannonBall = game.add.sprite(1300, 480, "cannonBall")

            //arrows
            arrowLeft = game.add.sprite(400,600,"arrowLeft");
            arrowRight = game.add.sprite(475, 600, "arrowRight");

            //score
            textStyle = { font: "36px Georgia", fill: "#000000" };
            scoreText = game.add.text(800, 610, "Points: 0", textStyle);

            //lives
            lives = game.add.text(1200, 610, "Lives: " + " " + lifeCounter, textStyle );

            //add physics
              game.physics.startSystem(Phaser.Physics.ARCADE);
              game.physics.enable(cannonBall, Phaser.Physics.ARCADE);
              game.physics.enable(cat, Phaser.Physics.ARCADE);
              game.physics.enable(heart, Phaser.Physics.ARCADE);
              game.physics.enable(poop, Phaser.Physics.ARCADE);
              game.physics.enable(scream, Phaser.Physics.ARCADE);
              game.physics.enable(tears, Phaser.Physics.ARCADE);
              game.physics.enable(tongue, Phaser.Physics.ARCADE);
              game.physics.enable(upsideDown, Phaser.Physics.ARCADE);
              game.physics.enable(cannon, Phaser.Physics.ARCADE);

            //start button
            //startButton = game.add.button(game.world.width*.5, game.world.height*.5, "startButton", startGame, this, 1, 0, 2);
           // startButton.anchor.set(.5);

            //music
            music = game.add.audio("gameMusic");

            //cursor keys
           // cursors = game.input.keyboard.createCursorKeys();

            //setup cannonBalls
            //cannonBalls = game.add.group("cannonBall");
           // game.physics.enable(cannonBalls, Phaser.Physics.ARCADE);
           // cannonBalls.createMultiple(30, "cannonBall");
          //  cannonBalls.setAll("anchor.x", 0.5);
           // cannonBalls.setAll("anchor.y", 1);
           // cannonBalls.setAll("outOfBoundsKill", true);
          //  cannonBalls.setAll("checkWorldBounds", true);

            //fireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);





        }

        function update() {
            //if (lifeCounter > 0) {
                //rotates cannonBall
                //cannon.rotation = game.Physics.arcade.angleToPointer(cannon);
                //if (fireButton.isDown()) {
                    //fireBullet();
                //}
           // }
       // }

        //function destroyImage(image) {
            //if (image.x <= -70) {
               // image.destroy();
            //}

        //function gameLoop() {
            //game.physics.arcade.accelerateToXY(cat, -90, 20, 70, 80, 80);
            //destroyImage(cat);
            //game.physics.arcade.accelerateToXY(heart, -90, 95, 70, 80, 80);
            // destroyImage(heart);
            // game.physics.arcade.accelerateToXY(poop, -90, 180, 70, 80, 80);
            //  destroyImage(poop);
            //  game.physics.arcade.accelerateToXY(scream, -90, 255, 70, 80, 80);
            //  destroyImage(scream);
            //   game.physics.arcade.accelerateToXY(tears, -90, 330, 70, 80, 80);
            //  destroyImage(tears);
            //   game.physics.arcade.accelerateToXY(tongue, -90, 405, 70, 80, 80);
            //   destroyImage(tongue);
            //    game.physics.arcade.accelerateToXY(upsideDown,-90, 480, 70, 80, 80);
            //    destroyImage(upsideDown);
       // }

       // function startGame(){
             //startButton.destroy();
             playing = true;
             gameLoop();
             music.play("gameMusic");

         }




         //function fireBullet() {
            // if (game.time.now > cannonTime) {
                 //cannonBall = cannonBalls.getFirstExists(false);
                 //if (cannonBall) {
                    // cannonBall.reset(cannonBall.x, cannonBall.y);
                    // cannonBall.body.velocity.y = -400;
                     //cannonTime = game.time.now + 200;
                // }

            // }
       //  }


        // function gameOver() {
            //timeLabel1.text.opacity = 0;
            // endGame = game.add.text(700, 200, "Game Over", {font: "100px Georgia", fill: "#fff"});
            // endGame.anchor.setTo(0.5);
            //  endGame.align = "center";
            //endButton = Phaser.button(this, 700, 300, "Retry", "Retry", restartGame, this)


        //}



    </script>

</body>
</html>